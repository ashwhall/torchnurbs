import numpy as np
from matplotlib import ticker
import matplotlib.pyplot as plt

"""
Plots some benchmark results to the screen.
"""
text = "The rise and fall at the start of each is likely due to the " \
       "laptop's turbo-boost followed by thermal throttling."

num_points = [121, 169, 289, 441, 729, 1156, 1849, 3025, 4900, 7921, 12769, 20736, 33856, 54756, 88804, 144400, 234256, 379456, 616225, 1002001]
num_points = np.array(num_points)
nurbspython = [0.054549408245545584, 0.05869997151280267, 0.05383891694578712, 0.051484336769912493, 0.053232404568973934, 0.05176837259955712, 0.050084977454466544, 0.048785716537843075, 0.053898100724390254, 0.05355609114846041, 0.05255142273006832, 0.04184579131734266, 0.05051318958879789, 0.04528159593341403, 0.0458885522308601, 0.04573776070140837, 0.04374689914699347, 0.042051843559812674, 0.04644958194540293, 0.046973843676658175]
nurbspy = [0.027290514610197564, 0.5924554311122998, 0.6567376720195912, 0.7425722480047533, 0.9641196478571248, 0.8949351446332856, 1.0407744135361756, 1.0881561045225165, 1.0282810889565333, 1.0348502871894802, 0.8410364689358516, 0.7903531785845791, 0.5317136315183827, 0.6337700518687198, 0.6704053646400259, 0.644995488655057, 0.5406739596765243, 0.49478964749647886, 0.476929987972286, 0.42590384636815815]
torchnurbs_st = [0.09957674093723758, 0.11043488860499173, 0.2644937847485882, 0.3384582846603136, 0.45165195689166193, 0.5756399648581266, 0.7603204015686275, 0.9273085637273102, 0.5975883032311265, 1.1228141284363982, 1.525480791333792, 2.2787008052852875, 2.580082172872812, 2.704916430098834, 2.73363961595425, 2.4395074789423146, 2.947072827565289, 2.6265495600583364, 2.6427518439094877, 2.9360301114257354]
torchnurbs_mt = [0.020902248910635003, 0.4052259129679175, 0.5732199598986116, 0.7574108004520662, 0.9003567731828837, 0.950492716166519, 1.1587202218450432, 1.5753767910799872, 2.081367587844024, 2.4772639274636123, 2.822132068679153, 4.133458282116453, 5.140446104547699, 4.927500528315877, 4.1653989344694216, 5.293194674586828, 2.8225222383207016, 3.5135211320807036, 2.1899554328156254, 3.109734933430445]


plt.figure().subplots_adjust(bottom=0.15)
plt.plot(num_points, torchnurbs_st, label="TorchNurbs (single-threaded)")
plt.plot(num_points, torchnurbs_mt, label="TorchNurbs (multi-threaded)")
plt.plot(num_points, nurbspython, label="NURBS-Python (pure Python)")
plt.plot(num_points, nurbspy, label="NurbsPy (vectorised NumPy)")


plt.title("Points Sampled per Second")
plt.legend()
plt.xlabel("Points sampled")
plt.ylabel("Million points per second")
plt.xscale("log")
plt.figtext(0.5, 0.03, text, wrap=True, horizontalalignment='center', fontsize=8)
plt.gca().xaxis.set_major_formatter(ticker.StrMethodFormatter('{x:,.0f}'))
plt.show()
